(window["webpackJsonpreact-example"]=window["webpackJsonpreact-example"]||[]).push([[4],{146:function(e,t,a){"use strict";a.r(t);var r=a(14),n=a(15),s=a(17),c=a(16),o=a(18),l=a(0),u=a.n(l),i=a(27),p=a(148),d=a(85),m=a.n(d),h=a(87),y=a.n(h),w=a(101),E=a.n(w),g=a(103),f=a(40),v=a(41),b=a(104),k=a.n(b),S=a(28);var N=a(135),x=a(136),T=a(137),O=a(138),j=function(e){var t=e.changeHandler,a=e.searchKeywords,r=e.searchKeyPress,n=e.keyword;return u.a.createElement("div",{className:"searchForm"},u.a.createElement("input",{name:"keyword",placeholder:"Search",onChange:t,onKeyPress:function(e){return r(e)},autoFocus:!0}),u.a.createElement("button",{onClick:a,disabled:!n}," ",u.a.createElement("i",{className:"fas fa-search"})," "))},I=function(e){var t=e.changeHandler,a=e.searchKeyPress,r=e.searchKeywords,n=e.keyword;return u.a.createElement(N.a,{expand:"md",fixed:"top"},u.a.createElement(x.a,null,u.a.createElement(T.a,{xs:"4",md:"7"},u.a.createElement(O.a,{href:"/"},"US News")),u.a.createElement(T.a,{xs:"8",md:"5"},u.a.createElement(j,{changeHandler:t,searchKeywords:r,searchKeyPress:a,keyword:n}))))},P=a(134),R=a(139),C=a(147),K=a(140),A=a(141),D=function(e){var t=Object(l.useState)(!1),a=Object(P.a)(t,2),r=a[0],n=a[1],s=e.changeSortType,c=e.sortType;return u.a.createElement(R.a,{isOpen:r,toggle:function(){return n((function(e){return!e}))}},u.a.createElement(C.a,{caret:!0},"Sort By: ",u.a.createElement("span",null,c)),u.a.createElement(K.a,null,u.a.createElement(A.a,{onClick:function(){return s("publishedAt")}},"Published At"),u.a.createElement(A.a,{onClick:function(){return s("relevancy")}},"Relevancy"),u.a.createElement(A.a,{onClick:function(){return s("popularity")}},"Popularity")))},M=a(142),_=a(143),H=a(144),F=a(145),z=function(e){var t=e.author,a=e.desciption,r=e.publishedDate,n=e.sourceId,s=e.sourceName,c=e.title,o=e.url,l=e.urlToImage,i=y()(r).format("YYYY-MM-DD HH:mm"),p="";switch(n){case"the-new-york-times":p="NT";break;case"the-washington-post":p="WP";break;default:p="NT"}return u.a.createElement(u.a.Fragment,null,u.a.createElement(M.a,{tag:"a",className:"newsPreview",href:o,target:"_blank"},u.a.createElement(_.a,null,u.a.createElement(x.a,null,u.a.createElement(T.a,{xs:"auto"},u.a.createElement("div",{className:"profile"},p)),u.a.createElement(T.a,{xs:"9"},s&&u.a.createElement("b",null,s),u.a.createElement("br",null),u.a.createElement("small",null,i)))),u.a.createElement(H.a,null,u.a.createElement("div",{className:"headerImg"},l&&u.a.createElement(F.a,{top:!0,width:"100%",src:l,alt:c})),u.a.createElement(H.a,null,c&&u.a.createElement("h5",null,c),t&&u.a.createElement("p",{className:"author"},"By ",u.a.createElement("b",null,t)),a&&u.a.createElement("p",null,a)))))},U=a(38),Y=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,this.props.loading?u.a.createElement(U.a,null):this.props.children)}}]),t}(l.Component);Y.defaultProps={loading:!1};var B=Y,L=function(e){function t(e){return Object(r.a)(this,t),Object(s.a)(this,Object(c.a)(t).call(this,e))}return Object(o.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props,t=e.keyword,a=e.currentNewsData,r=e.totalResults,n=e.ajaxStatus,s=e.changeSortType,c=e.sortType,o=m.a.uniqBy(a,"title");return u.a.createElement(u.a.Fragment,null,u.a.createElement(x.a,null,u.a.createElement(T.a,{xs:"12",lg:"6"},u.a.createElement("h4",{className:"heading"},r>0&&u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(u.a.Fragment,null,r,' news match "',t,'"'),!t&&u.a.createElement(u.a.Fragment,null,"Total: ",u.a.createElement("b",null,r)," news")),!r&&!n.isLoading&&u.a.createElement("span",null,"No Result was found!"))),u.a.createElement(T.a,{xs:"12",lg:"6"},u.a.createElement(D,{changeSortType:s,sortType:c}))),o&&u.a.createElement("div",{className:"newsPreviewContainer"},o.map((function(e,t){return u.a.createElement(z,{key:t,author:e.author,desciption:e.description,publishedDate:e.publishedAt,sourceId:e.source.id,sourceName:e.source.name,title:e.title,url:e.url,urlToImage:e.urlToImage})})),n&&u.a.createElement(B,{loading:n.isLoading})))}}]),t}(l.Component);a.d(t,"MainContainer",(function(){return G}));var G=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).scrollToloadMoreNews=function(){var e=(document.body.scrollTop||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight);if(a.setState({theposition:e}),1===e&&a.props.totalResults>a.props.pageSize){var t=a.props.pageIndex+1,r=a.state.sortType,n=a.props.keyword;a.props.loadMoreNews(n,r,t)}},a.onScrollingResult=function(e){m.a.throttle(a.scrollToloadMoreNews,100)()},a.searchKeywords=function(){var e=a.state,t=e.keyword,r=e.sortType,n=e.pageIndex;a.props.fetchCurrentNews(t,r,n),a.setState({keyword:""})},a.searchKeyPress=function(e){if(13===e.keycode||"Enter"===e.key){var t=a.state,r=t.keyword,n=t.sortType,s=t.pageIndex;a.props.fetchCurrentNews(r,n,s),a.setState({keyword:""})}},a.changeHandler=function(e){e.preventDefault();var t=e.target.value;a.setState({keyword:t})},a.changeSortType=function(e){a.setState({sortType:e});var t=a.state.keyword,r=a.props.pageIndex;a.props.fetchCurrentNews(t,e,r)},a.state={keyword:"",pageIndex:1,sortType:"publishedAt"},a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){var e=this.state,t=e.keyword,a=e.sortType,r=this.props.pageIndex;this.props.fetchCurrentNews(t,a,r),window.addEventListener("scroll",m.a.throttle(this.scrollToloadMoreNews,10),!1)}},{key:"render",value:function(){var e=this.props,t=e.ajaxStatus,a=e.currentNewsData,r=e.totalResults,n=e.keyword;return u.a.createElement(u.a.Fragment,null,u.a.createElement(I,{changeHandler:this.changeHandler,searchKeywords:this.searchKeywords,searchKeyPress:this.searchKeyPress,keyword:this.state.keyword}),u.a.createElement("div",{className:"container"},!0===t.isServerError&&u.a.createElement(p.a,{color:"danger"},t.serverMessage),u.a.createElement("div",{className:"dashboard",onScroll:this.onScrollingResult,ref:"newsScroll"},a&&u.a.createElement(L,{ajaxStatus:t,keyword:n,totalResults:r,currentNewsData:a,changeSortType:this.changeSortType,sortType:this.state.sortType}))))}}]),t}(l.Component);t.default=Object(i.connect)((function(e){return{ajaxStatus:e.ajaxStatus,currentNewsData:e.store.currentNewsData,keyword:e.store.keyword,totalResults:e.store.totalResults,pageIndex:e.store.pageIndex,pageSize:e.store.pageSize}}),{fetchCurrentNews:function(e,t,a){return function(){var a=Object(g.a)(E.a.mark((function a(r){var n,s,c,o;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.replace(/\s/g,"+"),s="".concat(S.news.API_URL,"everything?q=").concat(n,"&").concat(S.news.PARAM,"&pageSize=").concat(S.news.PAGE_SIZE,"&sortBy=").concat(t,"&apiKey=").concat(S.news.API_KEY),r({type:v.d}),r({type:f.b}),a.prev=4,a.next=7,k.a.get(s);case 7:c=a.sent,(o=c.data.articles.slice(0,S.news.RECORD_COUNT))&&(r({type:v.a,currentNewsData:o||{},keyword:e,totalResults:c.data.totalResults,totalPage:c.data.articles.length/S.news.PAGE_SIZE,pageIndex:1,pageSize:S.news.PAGE_SIZE}),r({type:f.a})),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(4),console.log("error: "+a.t0),r({type:f.d,serverStatus:a.t0.response.status,serverMessage:a.t0.response.data.message});case 16:case"end":return a.stop()}}),a,null,[[4,12]])})));return function(e){return a.apply(this,arguments)}}()},loadMoreNews:function(e,t,a){return function(){var r=Object(g.a)(E.a.mark((function r(n){var s,c,o,l,u,i;return E.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=e.replace(/\s/g,"+"),c="".concat(S.news.API_URL,"everything?q=").concat(s,"&").concat(S.news.PARAM,"&pageSize=").concat(S.news.PAGE_SIZE,"&sortBy=").concat(t,"&apiKey=").concat(S.news.API_KEY),n({type:f.b}),r.prev=3,r.next=6,k.a.get(c);case 6:o=r.sent,l=(a-1)*S.news.RECORD_COUNT,u=a*S.news.RECORD_COUNT,(i=o.data.articles.slice(l,u))&&(n({type:v.b,keyword:e,pageIndex:a,currentNewsData:i||{}}),n({type:f.a})),r.next=17;break;case 13:r.prev=13,r.t0=r.catch(3),console.log("error: "+r.t0),n({type:f.d,serverStatus:r.t0.response.status,serverMessage:r.t0.response.data.message});case 17:case"end":return r.stop()}}),r,null,[[3,13]])})));return function(e){return r.apply(this,arguments)}}()}})(G)}}]);
//# sourceMappingURL=4.f5ffc58a.chunk.js.map